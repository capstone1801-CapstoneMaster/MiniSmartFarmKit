{"version":3,"sources":["../../src/pages/item-detail/item-detail.module.ts","../../src/pages/item-detail/item-detail.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { ItemDetailPage } from './item-detail';\n\n@NgModule({\n  declarations: [\n    ItemDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ItemDetailPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    ItemDetailPage\n  ]\n})\nexport class ItemDetailPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-detail/item-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport {AngularFireDatabase} from 'angularfire2/database';\n\nimport { Items } from '../../providers/providers';\n\n@IonicPage()\n@Component({\n  selector: 'page-item-detail',\n  templateUrl: 'item-detail.html'\n})\nexport class ItemDetailPage {\n  itemName: any;\n  item : any;\n  serialNumber : any;\n  userRef : any;\n  numberOfPlants : any;\n  plantKey : any;\n  date = new Date();\n\n  constructor(public navCtrl: NavController, navParams: NavParams, public afDB : AngularFireDatabase) {\n    this.itemName = navParams.data.item;\n    this.serialNumber = navParams.data.serialNumber;\n\n    this.userRef = \"userFarm/\" + this.serialNumber;\n    console.log(this.itemName);\n    console.log(this.userRef);\n\n    this.afDB.list('Plants', ref => ref.orderByChild('Name').equalTo(this.itemName)).valueChanges().subscribe(Items => {\n      this.item = Items;\n      console.log(this.item)\n    });\n\n\n    // this.afDB.list('Plants', ref => ref.orderByChild('Name').equalTo(this.itemName)).snapshotChanges().take(1).subscribe(items => {\n    //   items.forEach(item => {\n    //       if(item.payload.val().Name != this.itemName) this.plantKey = item.payload.val().plantKey;\n    //   })\n    // });\n\n    for(var i=0; i<5; i++) {\n      this.afDB.object('Plants/' + i).snapshotChanges().take(1).subscribe((item) => {\n        if(item.payload.val().Name == this.itemName) this.plantKey = item.payload.val().plantKey;\n      })\n    }\n    \n\n    this.afDB.object(this.userRef).snapshotChanges().take(1).subscribe((item2) => {\n      this.numberOfPlants = item2.payload.val().numberOfPlants;\n    })\n\n\n  }\n\n  setPlant() {\n    // TODO : 누르면 DB의 numberOfPlants ++ 시킨다.\n    this.afDB.list(\"/userFarm\").update(this.serialNumber, {numberOfPlants : this.numberOfPlants + 1});\n\n    // Plants의 자식노드에 해당 식물 plantKey값 넣어서 만들어줘야해\n    console.log(this.plantKey);\n    this.afDB.list(this.userRef + \"/Plants/\").update(this.plantKey, {date : this.date});\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/item-detail/item-detail.ts"],"sourceRoot":""}